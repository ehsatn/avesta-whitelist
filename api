export default async (req) => {
  // Get the destination URL from the query parameter
  const url = new URL(req.url).searchParams.get('url');

  if (!url) {
    return new Response('URL parameter is missing', { status: 400 });
  }

  try {
    // Fetch the content from the destination URL
    const response = await fetch(url, {
      headers: { 'Content-Type': 'application/json' }
    });

    // Return the response from the destination URL
    return new Response(response.body, {
      status: response.status,
      statusText: response.statusText,
      headers: response.headers
    });

  } catch (e) {
    return new Response(e.message, { status: 500 });
  }
};
